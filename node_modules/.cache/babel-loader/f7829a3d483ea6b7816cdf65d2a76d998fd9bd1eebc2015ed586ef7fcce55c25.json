{"ast":null,"code":"import _regeneratorRuntime from\"D:/Canada/Algonquin/Projects/react-app/LiveWebsite/ToDoApp/react-todo-app-github/react-todo-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Canada/Algonquin/Projects/react-app/LiveWebsite/ToDoApp/react-todo-app-github/react-todo-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Canada/Algonquin/Projects/react-app/LiveWebsite/ToDoApp/react-todo-app-github/react-todo-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';//import { GetUser } from '../../JS/GetUser';\nimport'../../CSS/loginsigup.css';// Import your CSS file for styling\nimport Navbar from'../Navbar/Navbar';import{useNavigate}from'react-router-dom';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(_ref){var apiURL=_ref.apiURL;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),useremail=_useState2[0],setUserEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errMsg=_useState6[0],setErrorMsg=_useState6[1];var navigate=useNavigate();// Move useNavigate hook call outside of the conditional logic\nvar URL=apiURL;function GetUser(_x,_x2){return _GetUser.apply(this,arguments);}function _GetUser(){_GetUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(useremail,password){var errorMsg,response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(URL,\"/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({useremail:useremail,password:password})});case 3:response=_context2.sent;if(!response.ok){_context2.next=11;break;}_context2.next=7;return response.json();case 7:data=_context2.sent;if(data.authenticated){console.log(data.user);sessionStorage.setItem('signedInUser',JSON.stringify(data.user));}else{errorMsg='Invalid email or password';}_context2.next=12;break;case 11:errorMsg=response.statusText;case 12:_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](0);errorMsg=_context2.t0;case 17:return _context2.abrupt(\"return\",errorMsg);case 18:case\"end\":return _context2.stop();}},_callee2,null,[[0,14]]);}));return _GetUser.apply(this,arguments);}var handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var loginErrMsg;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return GetUser(useremail,password);case 3:loginErrMsg=_context.sent;// Retrieve error message from GetLoginData\nsetErrorMsg(loginErrMsg);// Set error message state\nif(!loginErrMsg){navigate('/todopage');}case 6:case\"end\":return _context.stop();}},_callee);}));return function handleLogin(_x3){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-container mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"useremail\",children:\"User email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"useremail\",className:\"form-control\",value:useremail,onChange:function onChange(e){return setUserEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"form-control\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-white fw-bold\",children:[\"Click \",/*#__PURE__*/_jsx(Link,{className:\"fw-bold\",to:\"/signup\",children:\"sign up\"}),\" if you don't have an account.\"]}),errMsg&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-danger fw-bold\",children:errMsg})]})]});};export default Login;","map":{"version":3,"names":["React","useState","Navbar","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_ref","apiURL","_useState","_useState2","_slicedToArray","useremail","setUserEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","errMsg","setErrorMsg","navigate","URL","GetUser","_x","_x2","_GetUser","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","errorMsg","response","data","wrap","_callee2$","_context2","prev","next","fetch","concat","method","headers","body","JSON","stringify","sent","ok","json","authenticated","console","log","user","sessionStorage","setItem","statusText","t0","abrupt","stop","handleLogin","_ref2","_callee","e","loginErrMsg","_callee$","_context","preventDefault","_x3","children","className","onSubmit","htmlFor","type","id","value","onChange","target","to"],"sources":["D:/Canada/Algonquin/Projects/react-app/LiveWebsite/ToDoApp/react-todo-app-github/react-todo-app/src/Components/LoginPage/LogIn.js"],"sourcesContent":["import React, { useState } from 'react';\r\n//import { GetUser } from '../../JS/GetUser';\r\nimport '../../CSS/loginsigup.css'; // Import your CSS file for styling\r\nimport Navbar from '../Navbar/Navbar';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst Login = ({ apiURL }) => {\r\n    const [useremail, setUserEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errMsg, setErrorMsg] = useState('');\r\n    const navigate = useNavigate(); // Move useNavigate hook call outside of the conditional logic\r\n\r\n    const URL = apiURL;\r\n\r\n    async function GetUser(useremail, password) {\r\n        let errorMsg;\r\n\r\n        try {\r\n            const response = await fetch(`${URL}/login`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({ useremail, password }),\r\n            })\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                if (data.authenticated) {\r\n                    console.log(data.user);\r\n                    sessionStorage.setItem('signedInUser', JSON.stringify(data.user));\r\n                } else {\r\n                    errorMsg = 'Invalid email or password';\r\n                }\r\n            } else {\r\n                errorMsg = response.statusText;\r\n            }\r\n        } catch (error) {\r\n            errorMsg = error;\r\n        }\r\n\r\n        return errorMsg;\r\n    }\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        const loginErrMsg = await GetUser(useremail, password); // Retrieve error message from GetLoginData\r\n        setErrorMsg(loginErrMsg); // Set error message state\r\n\r\n        if (!loginErrMsg) {\r\n            navigate('/todopage');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <div className=\"login-container mt-5\">\r\n                <h2>Login</h2>\r\n                <form onSubmit={handleLogin}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"useremail\">User email:</label>\r\n                        <input type=\"text\" id=\"useremail\" className='form-control' value={useremail} onChange={(e) => setUserEmail(e.target.value)} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\">Password:</label>\r\n                        <input type=\"password\" id=\"password\" className='form-control' value={password} onChange={(e) => setPassword(e.target.value)} />\r\n                    </div>\r\n                    <button type=\"submit\">Login</button>\r\n                </form>\r\n                <div className='mt-4 text-white fw-bold'>\r\n                    Click <Link className=\"fw-bold\" to=\"/signup\">sign up</Link> if you don't have an account.\r\n                </div>\r\n                {errMsg && <div className='mt-4 text-danger fw-bold'>{errMsg}</div>}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}